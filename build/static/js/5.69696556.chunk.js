(this["webpackJsonpappstack-react"]=this["webpackJsonpappstack-react"]||[]).push([[5],{1058:function(e,t,n){"use strict";n.r(t);var a=n(73),r=n(19),c=n.n(r),i=n(40),o=n(18),l=n(1),u=n.n(l),s=n(876),d=n(888),p=n(898),m=n(877),f=n(887),h=n(941),b=n(900),g=n(901),x=n(902),y=n(371),E=n(14),v=n(953),w=n.n(v),S=n(955),k=n.n(S),O=n(956),D=n.n(O),j=(n(957),n(1060)),z=n(958),R=n(22),V=n(42),A=Object(E.connect)((function(e){return{search:Object(z.c)(e)}}))((function(e){return u.a.createElement(R.d,{key:Date.parse(new Date),enableReinitialize:!0,initialValues:{search:e.search?e.search:""},onSubmit:function(t){e.onSearch(t.search)}},u.a.createElement(R.c,null,u.a.createElement(m.a,{style:{alignItems:"center"}},u.a.createElement(f.a,{xs:"auto"},u.a.createElement(R.b,{bsSize:"lg",type:"text",name:"search",placeholder:"Search Vaccine Info",component:V.a})),u.a.createElement(f.a,{xs:"auto"},u.a.createElement(j.a,{addonType:"append",color:"primary"},u.a.createElement(y.a,{type:"submit"},"Search!"))),u.a.createElement(f.a,{xs:"auto"},u.a.createElement(j.a,{addonType:"append",color:"primary"},u.a.createElement(y.a,{type:"submit",color:"danger",onClick:function(){e.onSearch("")}},"Reset Search!"))))))})),F=n(1051),N=n(1052),C=n(1053),P=n(1054),M=n(10),T=n(43),B="/vaccines",q={getAll:function(e,t,n,a,r){null!==n&&void 0!==n&&null!==a&&void 0!==a||(n="id",a="asc");var c={page:e,size:t,sort:"".concat(n,",").concat(a),search:r};return T.a.get("".concat(B),{params:c})},create:function(e,t,n,a,r,c){var i={vaccineName:e,description:t,price:n,amount:a,expiryDate:r+" 00:00",manufacture:c};return console.log(i),T.a.post(B,i)},update:function(e,t,n,a,r,c,i){var o={vaccineName:t,description:n,price:a,amount:r,expiryDate:c+" 00:00",manufacture:i};return T.a.put("".concat(B,"/").concat(e),o)},getById:function(e){return T.a.get("".concat(B,"/").concat(e))},deleteById:function(e){return T.a.delete("".concat(B,"/").concat(e))}},I=function(e,t,n,a,r,c){return{type:M.g,payload:{vaccines:e,page:t,totalElement:n,sortField:a,sortType:r,search:c}}},L=n(28),U=n(60),H=n(927);t.default=Object(E.connect)((function(e){return{vaccines:Object(z.a)(e),page:Object(z.b)(e),size:Object(z.e)(e),sortField:Object(z.f)(e),sortType:Object(z.g)(e),totalElement:Object(z.h)(e),selectedRows:Object(z.d)(e)}}),{getListVaccineAction:function(e,t,n,a,r){return function(){var o=Object(i.a)(c.a.mark((function i(o){var l,u,s;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,q.getAll(e,t,n,a,r);case 3:l=c.sent,u=l.details.vaccines,s=l.details.totalElements,o(I(u,e,s)),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0);case 12:case"end":return c.stop()}}),i,null,[[0,9]])})));return function(e){return o.apply(this,arguments)}}()},updateSelectedRowsAction:function(e){return{type:M.h,payload:e}}})((function(e){var t=function(e,t){U.toastr.success(e,t,{timeOut:5e3,showCloseButton:!1,progressBar:!1,position:"top-right"})},n=function(e,t){U.toastr.error(e,t,{timeOut:5e3,showCloseButton:!1,progressBar:!1,position:"top-right"})},r=e.getListVaccineAction,E=e.size;Object(l.useEffect)((function(){r(1,E)}),[r,E]);var v=Object(l.useState)(!1),S=Object(o.a)(v,2),O=S[0],j=S[1],z=Object(l.useState)(null),M=Object(o.a)(z,2),T=M[0],B=M[1],I=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,q.getById(t);case 3:(n=e.sent).details.vaccine.expiryDate=n.details.vaccine.expiryDate.split(" ",1),console.log(n),B(n.details.vaccine);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this ?")){e.next=16;break}if(null!==a&&void 0!==a){e.next=6;break}n("Delete Vaccine","Sorry, Cann't Delete"),e.next=16;break;case 6:return e.prev=6,e.next=9,q.deleteById(a);case 9:t("Delete Vaccine","Delete Vaccine Successfully!"),Q(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),n("Delete Vaccine",e.t0.data.message);case 16:Q();case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var a=Object(i.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Do you want to delete all selected rows ?")){a.next=10;break}if(null!==e.selectedRows&&void 0!==e.selectedRows&&0!==e.selectedRows.length){a.next=6;break}n("Delete Vaccine","You have not selected the vaccine!"),a.next=10;break;case 6:return a.next=8,e.selectedRows.forEach((function(e){q.deleteById(e),console.log("X\xf3a ph\u1ea7n t\u1eed th\u1ee9 "+e)}));case 8:t("Delete Vaccine","Delete Vaccine Successfully!"),Q();case 10:Q();case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),Y=function(t,n){var r=e.selectedRows;r=n?[].concat(Object(a.a)(r),[t.id]):r.filter((function(e){return e!==t.id})),console.log(r),e.updateSelectedRowsAction(r)},G=function(t,n){var a=n.map((function(e){return e.id})),r=[];t&&(r=a),e.updateSelectedRowsAction(r)},K=function(e,t){var n=t.page,a=t.sizePerPage,c=t.sortField,i=t.sortOrder,o=t.searchText;r(n,a,c,i,o)},Q=function(){K(0,{page:1,sizePerPage:E,sortField:"id",sortOrder:"asc",searchText:""}),e.updateSelectedRowsAction([])},W=[{dataField:"id",text:"ID",sort:!0,align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"57px"}}},{dataField:"name",text:"Name",sort:!0,headerStyle:function(){return{width:"135px"}}},{dataField:"description",text:"Description",sort:!0},{dataField:"price",text:"Price",sort:!0,align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"95px"}}},{dataField:"amount",text:"Amount",sort:!0,align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"95px"}}},{dataField:"manufacture",text:"Manufacture",sort:!0,headerStyle:function(){return{width:"139px"}}},{dataField:"expiryDate",text:"ExpiryDate",sort:!0,headerStyle:function(){return{width:"150px"}}},{dataField:"actions",text:"Actions",align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"90px"}},formatter:function(e,t,n){return u.a.createElement(u.a.Fragment,null,u.a.createElement(H.a,{className:"align-middle mr-2",size:18,onClick:function(){return I(t.id)}})," ",u.a.createElement(F.a,{className:"align-middle mr-2",size:18,onClick:function(){return J(t.id)}}))}}];return u.a.createElement(s.a,{fluid:!0,className:"p-0"},u.a.createElement("h1",{className:"h3 mb-3"},"Vaccine Management"),u.a.createElement(d.a,null,u.a.createElement(p.a,null,u.a.createElement(D.a,{keyField:"id",data:e.vaccines,columns:W,search:!0},(function(t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:{alignItems:"flex-end"}},u.a.createElement(f.a,{xs:"9"},u.a.createElement(A,t.searchProps)),u.a.createElement(f.a,{xs:"3",style:{paddingBottom:20}},u.a.createElement("div",{className:"float-right pull-right"},u.a.createElement(N.a,{className:"align-middle mr-3",color:"black",size:25,onClick:Q}),u.a.createElement(C.a,{className:"align-middle mr-3",color:"black",size:25,onClick:function(){return j(!0)}}),u.a.createElement(P.a,{className:"align-middle mr-3",color:"black",size:25,onClick:X})))),u.a.createElement(w.a,Object.assign({},t.baseProps,{bootstrap4:!0,striped:!0,hover:!0,bordered:!0,remote:!0,sort:{dataField:e.sortField,order:e.sortType},pagination:k()({page:e.page,totalSize:e.totalElement,sizePerPage:e.size,nextPageText:">",prePageText:"<",withFirstAndLast:!0,alwaysShowAllBtns:!0,hideSizePerPage:!0}),selectRow:{mode:"checkbox",clickToSelect:!0,selected:e.selectedRows,onSelect:Y,onSelectAll:G},onTableChange:K})))})))),u.a.createElement(h.a,{isOpen:O},u.a.createElement(R.d,{enableReinitialize:!0,initialValues:{vaccineName:T?T.name:"",description:T?T.description:"",price:T?T.price:"",amount:T?T.amount:"",expiryDate:T?T.expiryDate:"",manufacture:T?T.manufacture:"",startDate:new Date},validationSchema:L.c({vaccineName:L.e().required("Required").max(50,"Must be between 5 to 50 characters").min(5,"Must be between 5 to 50 characters"),description:L.e().required("Required").max(255,"Must be between 5 to 255").min(5,"Must be between 5 to 255"),price:L.b().required("Required").min(100,"Must be higher than 100"),amount:L.b().required("Required").min(1,"Must be higher than 1"),expiryDate:L.a().min(L.d("startDate"),"Expiry Date must be in the future"),manufacture:L.e().required("Required").max(50,"Must be between 5 to 50").min(5,"Must be between 5 to 50")}),onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a),!T){e.next=18;break}return e.prev=2,console.log(T),e.next=6,q.update(T.id,a.vaccineName,a.description,a.price,a.amount,a.expiryDate,a.manufacture);case 6:j(!1),t("Update Vaccine","Update Vaccine Successfully!"),Q(),B(null),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),n("Update Error",e.t0.data.message),console.log(e.t0);case 16:e.next=33;break;case 18:return e.prev=18,e.next=21,q.create(a.vaccineName,a.description,a.price,a.amount,a.expiryDate,a.manufacture);case 21:j(!1),console.log(a),t("Create Vaccine","Create Vaccine Successfully!"),B(null),Q(),e.next=33;break;case 28:e.prev=28,e.t1=e.catch(18),n("Create Error",e.t1.data.message),console.log(e.t1),j(!1);case 33:case"end":return e.stop()}}),e,null,[[2,12],[18,28]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.isSubmitting;return u.a.createElement(R.c,null,u.a.createElement(b.a,null,"Create New Vaccine"),u.a.createElement(g.a,null,u.a.createElement(m.a,null,u.a.createElement(f.a,{xs:"3"},u.a.createElement(m.a,{style:{paddingLeft:"20px",paddingTop:"30px",height:"100px"}},"Vaccine Name:"),u.a.createElement(m.a,{style:{paddingLeft:"20px",height:"80px"}},"Description:"),u.a.createElement(m.a,{style:{paddingLeft:"20px",height:"70px"}},"Price:"),u.a.createElement(m.a,{style:{paddingLeft:"20px",height:"80px"}},"Amount:"),u.a.createElement(m.a,{style:{paddingLeft:"20px",height:"70px"}},"Expiry Date:"),u.a.createElement(m.a,{style:{paddingLeft:"20px",height:"70px"}},"Manufacture:")),u.a.createElement(f.a,{xs:"9"},u.a.createElement(R.b,{bsSize:"lg",type:"text",name:"vaccineName",placeholder:"Enter Vaccine Name",component:V.a}),u.a.createElement(R.b,{bsSize:"lg",type:"text",name:"description",placeholder:"Enter Description",component:V.a}),u.a.createElement(R.b,{bsSize:"lg",type:"number",name:"price",placeholder:"Enter Price",component:V.a}),u.a.createElement(R.b,{bsSize:"lg",type:"number",name:"amount",placeholder:"Enter Amount",component:V.a}),u.a.createElement(R.b,{bsSize:"lg",type:"date",format:"yyyy-MM-dd HH:mm",name:"expiryDate",component:V.a}),u.a.createElement(R.b,{bsSize:"lg",type:"text",name:"manufacture",placeholder:"Enter Manufacture",component:V.a})))),u.a.createElement(x.a,null,u.a.createElement(y.a,{type:"submit",color:"primary",disabled:t},"Save")," ",u.a.createElement(y.a,{color:"primary",onClick:function(){B(null),j(!1)}},"Close")))}))))}))},958:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return x})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return E}));var a=n(897),r=function(e){return e.vaccine},c=Object(a.a)(r,(function(e){return e.vaccines})),i=Object(a.a)(r,(function(e){return e.page})),o=Object(a.a)(r,(function(e){return e.size})),l=Object(a.a)(r,(function(e){return e.totalElement})),u=Object(a.a)(r,(function(e){return e.search})),s=Object(a.a)(r,(function(e){return e.selectedRows})),d=Object(a.a)(r,(function(e){return e.sortField})),p=Object(a.a)(r,(function(e){return e.sortType})),m=function(e){return c(e)},f=function(e){return i(e)},h=function(e){return o(e)},b=function(e){return l(e)},g=function(e){return u(e)},x=function(e){return s(e)},y=function(e){return d(e)},E=function(e){return p(e)}}}]);
//# sourceMappingURL=5.69696556.chunk.js.map