(this["webpackJsonpappstack-react"]=this["webpackJsonpappstack-react"]||[]).push([[7],{1057:function(e,t,a){"use strict";a.r(t);var n=a(73),r=a(19),l=a.n(r),c=a(40),i=a(18),s=a(1),o=a.n(s),u=a(876),d=a(888),m=a(898),p=a(877),h=a(887),b=a(941),f=a(900),g=a(901),E=a(902),x=a(371),y=a(10),w=a(66),S=function(e,t,a,n,r,l){return{type:y.e,payload:{users:e,page:t,totalElement:a,sortField:n,sortType:r,search:l}}},z=a(14),v=a(953),O=a.n(v),k=a(955),M=a.n(k),L=a(897),A=function(e){return e.user},R=Object(L.a)(A,(function(e){return e.users})),j=Object(L.a)(A,(function(e){return e.page})),U=Object(L.a)(A,(function(e){return e.size})),q=Object(L.a)(A,(function(e){return e.totalElement})),F=Object(L.a)(A,(function(e){return e.search})),C=(Object(L.a)(A,(function(e){return e.isLoading})),Object(L.a)(A,(function(e){return e.selectedRows}))),I=Object(L.a)(A,(function(e){return e.sortField})),P=Object(L.a)(A,(function(e){return e.sortType})),D=function(e){return R(e)},N=function(e){return j(e)},T=function(e){return U(e)},B=function(e){return q(e)},$=function(e){return F(e)},V=function(e){return C(e)},_=function(e){return I(e)},J=function(e){return P(e)},W=a(956),X=a.n(W),Y=(a(957),a(1060)),G=a(22),H=a(42),K=Object(z.connect)((function(e){return{search:$(e)}}))((function(e){return o.a.createElement(G.d,{key:Date.parse(new Date),enableReinitialize:!0,initialValues:{search:e.search?e.search:""},onSubmit:function(t){e.onSearch(t.search)}},o.a.createElement(G.c,null,o.a.createElement(p.a,{style:{alignItems:"center"}},o.a.createElement(h.a,{xs:"auto"},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"search",placeholder:"Search User Info",component:H.a})),o.a.createElement(h.a,{xs:"auto"},o.a.createElement(Y.a,{addonType:"append",color:"primary"},o.a.createElement(x.a,{type:"submit"},"Search!"))),o.a.createElement(h.a,{xs:"auto"},o.a.createElement(Y.a,{addonType:"append",color:"primary"},o.a.createElement(x.a,{type:"submit",color:"danger",onClick:function(){e.onSearch("")}},"Reset Search!"))))))})),Q=a(1051),Z=a(1052),ee=a(1053),te=a(1054),ae=a(60),ne=a(927),re=a(28);t.default=Object(z.connect)((function(e){return{users:D(e),page:N(e),size:T(e),sortField:_(e),sortType:J(e),totalElement:B(e),selectedRows:V(e)}}),{getListUserAction:function(e,t,a,n,r){return function(){var i=Object(c.a)(l.a.mark((function c(i){var s,o,u;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,w.a.getAll(e,t,a,n,r);case 3:s=l.sent,o=s.details.users,u=s.details.totalElements,i(S(o,e,u)),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(0),console.log(l.t0);case 12:case"end":return l.stop()}}),c,null,[[0,9]])})));return function(e){return i.apply(this,arguments)}}()},updateSelectedRowsAction:function(e){return{type:y.f,payload:e}}})((function(e){var t=e.getListUserAction,a=e.size,r=function(e,t){ae.toastr.success(e,t,{timeOut:2500,showCloseButton:!1,progressBar:!1,position:"top-right"})},y=function(e,t){ae.toastr.error(e,t,{timeOut:2500,showCloseButton:!1,progressBar:!1,position:"top-right"})};Object(s.useEffect)((function(){t(1,a)}),[t,a]);var S=Object(s.useState)(!1),z=Object(i.a)(S,2),v=z[0],k=z[1],L=Object(s.useState)({}),A=Object(i.a)(L,2),R=A[0],j=A[1],U=Object(s.useState)(!1),q=Object(i.a)(U,2),F=q[0],C=q[1],I=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,w.a.getById(t);case 3:a=e.sent,j(a.details.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this ?")){e.next=16;break}if(null!==t&&void 0!==t){e.next=6;break}y("Delete User","Sorry, Cann't Delete"),e.next=16;break;case 6:return e.prev=6,e.next=9,w.a.deleteById(t);case 9:r("Delete User","Delete User Successfully!"),V(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),y("Delete User",e.t0.data.message);case 16:V();case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to delete all selected rows ?")){t.next=10;break}if(null!==e.selectedRows&&void 0!==e.selectedRows&&0!==e.selectedRows.length){t.next=6;break}y("Delete User","You have not selected the user!"),t.next=10;break;case 6:return t.next=8,e.selectedRows.forEach((function(e){w.a.deleteById(e),console.log("X\xf3a ph\u1ea7n t\u1eed th\u1ee9 "+e)}));case 8:r("Delete User","Delete User Successfully!"),V();case 10:V();case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(t,a){var r=e.selectedRows;r=a?[].concat(Object(n.a)(r),[t.id]):r.filter((function(e){return e!==t.id})),console.log(r),e.updateSelectedRowsAction(r)},T=function(t,a){var n=a.map((function(e){return e.id})),r=[];t&&(r=n),e.updateSelectedRowsAction(r)},B=[{dataField:"id",text:"Id",sort:!0,align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"55px"}}},{dataField:"username",text:"UserName",sort:!0,headerStyle:function(){return{width:"120px"}}},{dataField:"fullname",text:"FullName",sort:!0,headerStyle:function(){return{width:"140px"}}},{dataField:"age",text:"Age",sort:!0,align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"75px"}}},{dataField:"address",text:"Address",sort:!0},{dataField:"phone",text:"Phone",sort:!0,headerStyle:function(){return{textAlign:"center",width:"120px"}}},{dataField:"email",text:"Email",sort:!0,headerStyle:function(){return{textAlign:"center",width:"220px"}}},{dataField:"actions",text:"Actions",align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"90px"}},formatter:function(e,t,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ne.a,{className:"align-middle mr-2",size:18,onClick:function(){return I(t.id)}})," ",o.a.createElement(Q.a,{className:"align-middle mr-2",size:18,onClick:function(){return P(t.id)}}))}}],$=function(e,a){var n=a.page,r=a.sizePerPage,l=a.sortField,c=a.sortOrder,i=a.searchText;t(n,r,l,c,i)},V=function(){$(0,{page:1,sizePerPage:a,sortField:"id",sortOrder:"asc",searchText:""}),e.updateSelectedRowsAction([])};return o.a.createElement(u.a,{fluid:!0,className:"p-0"},o.a.createElement("h1",{className:"h3 mb-3"},"User Management"),o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(X.a,{keyField:"id",data:e.users,columns:B,search:!0},(function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{style:{alignItems:"flex-end"}},o.a.createElement(h.a,{xs:"9"},o.a.createElement(K,t.searchProps)),o.a.createElement(h.a,{xs:"3",style:{paddingBottom:20}},o.a.createElement("div",{className:"float-right pull-right"},o.a.createElement(Z.a,{className:"align-middle mr-3",color:"black",size:25,onClick:V}),o.a.createElement(ee.a,{className:"align-middle mr-3",color:"black",size:25,onClick:function(){return k(!0)}}),o.a.createElement(te.a,{className:"align-middle mr-3",color:"black",size:25,onClick:D})))),o.a.createElement(O.a,Object.assign({},t.baseProps,{bootstrap4:!0,striped:!0,hover:!0,bordered:!0,remote:!0,sort:{dataField:e.sortField,order:e.sortType},pagination:M()({page:e.page,totalSize:e.totalElement,sizePerPage:e.size,nextPageText:">",prePageText:"<",withFirstAndLast:!0,alwaysShowAllBtns:!0,hideSizePerPage:!0}),selectRow:{mode:"checkbox",clickToSelect:!0,selected:e.selectedRows,onSelect:N,onSelectAll:T},onTableChange:$})))})))),o.a.createElement(b.a,{isOpen:v,style:{maxWidth:"1050px",width:"100%"}},o.a.createElement(G.d,{enableReinitialize:!0,initialValues:{username:"",password:"",fullname:"",age:"",address:"",phone:"",email:"",citizenId:"",prioritize:""},validationSchema:re.c({username:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),password:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),fullname:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),age:re.b().required("Required").min(12,"Must be higher than 12"),phone:re.e().required().matches(/^[0-9]+$/,"Must be only digits").min(10,"Must be exactly 10 digits").max(10,"Must be exactly 10 digits"),citizenId:re.e().required().matches(/^[0-9]+$/,"Must be only digits").min(9,"Must be from 9 to 20 digits").max(20,"Must be from 9 to 20  digits"),email:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters").email("Invalid email address"),address:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),prioritize:re.b().required("Required").max(2,"Must be between 0 to 2").min(0,"Must be between 0 to 2")}),onSubmit:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,w.a.create(t.username,t.password,t.typeAccount,t.fullname,t.age,t.address,t.phone,t.email,t.citizenId,t.prioritize);case 4:k(!1),console.log(t),r("Create User","Create User Successfully!"),V(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),y("Create Error",e.t0.data.message),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.isSubmitting;return o.a.createElement(G.c,{size:"lg"},o.a.createElement(f.a,null,"Create New User"),o.a.createElement(g.a,null,o.a.createElement(p.a,{style:{height:"7px"}},o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Username:"),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Fullname:")),o.a.createElement(p.a,null,o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"username",placeholder:"Enter Username",component:H.a})),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"fullname",placeholder:"Enter Fullname",component:H.a}))),o.a.createElement(p.a,{style:{height:"7px"}},o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Password:"),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"TypeAccount:")),o.a.createElement(p.a,null,o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"password",name:"password",placeholder:"Enter password",component:H.a})),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{as:"select",bsSize:"lg",type:"select",name:"typeAccount",component:H.a},o.a.createElement("option",{value:"ROLE_USER"},"User"),o.a.createElement("option",{value:"ROLE_MOD"},"Mod"),o.a.createElement("option",{value:"ROLE_ADMIN"},"Admin")))),o.a.createElement(p.a,{style:{height:"7px"}},o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Age:"),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Address:")),o.a.createElement(p.a,null,o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"number",name:"age",placeholder:"Enter Age",component:H.a})),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"address",placeholder:"Enter Address",component:H.a}))),o.a.createElement(p.a,{style:{height:"7px"}},o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Phone:"),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Email:")),o.a.createElement(p.a,null,o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"phone",placeholder:"Enter Phone Number",component:H.a})),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"email",placeholder:"Enter Email",component:H.a}))),o.a.createElement(p.a,{style:{height:"7px"}},o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"CitizenID:"),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},"Prioritize:")),o.a.createElement(p.a,null,o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"citizenId",placeholder:"Enter CitizenID",component:H.a})),o.a.createElement(h.a,{md:"6",style:{paddingLeft:"20px"}},o.a.createElement(G.b,{bsSize:"lg",type:"number",name:"prioritize",placeholder:"Enter Prioritize",component:H.a})))),o.a.createElement(E.a,null,o.a.createElement(x.a,{type:"submit",color:"primary",disabled:t},"Save")," ",o.a.createElement(x.a,{color:"primary",onClick:function(){j(null),k(!1)}},"Close")))}))),o.a.createElement(b.a,{isOpen:F},o.a.createElement(G.d,{enableReinitialize:!0,initialValues:{fullname:R?R.fullname:"",age:R?R.age:"",address:R?R.address:"",phone:R?R.phone:"",citizenId:R?R.citizenId:""},validationSchema:re.c({fullname:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),age:re.b().required("Required").min(12,"Must be higher than 12"),address:re.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters"),phone:re.e().required().matches(/^[0-9]+$/,"Must be only digits").min(10,"Must be exactly 10 digits").max(10,"Must be exactly 10 digits"),citizenId:re.e().required().matches(/^[0-9]+$/,"Must be only digits").min(9,"Must be from 9 to 20 digits").max(20,"Must be from 9 to 20  digits")}),onSubmit:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,w.a.update(R.id,t.username,t.password,t.fullname,t.age,t.address,t.phone,t.email,t.citizenId);case 4:C(!1),console.log(t),r("Update User","Update User Successfully!"),V(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),y("Update Error",e.t0.data.message),console.log(e.t0),C(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.isSubmitting;return o.a.createElement(G.c,null,o.a.createElement(f.a,null,"Update User"),o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{xs:"3"},o.a.createElement(p.a,{style:{paddingLeft:"20px",paddingTop:"30px",height:"100px"}},"Fullname:"),o.a.createElement(p.a,{style:{paddingLeft:"20px",height:"82px"}},"Age:"),o.a.createElement(p.a,{style:{paddingLeft:"20px",height:"70px"}},"Address:"),o.a.createElement(p.a,{style:{paddingLeft:"20px",height:"70px"}},"Phone:"),o.a.createElement(p.a,{style:{paddingLeft:"20px",height:"70px"}},"CitizenID:")),o.a.createElement(h.a,{xs:"9"},o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"fullname",placeholder:"Enter Fullname",component:H.a}),o.a.createElement(G.b,{bsSize:"lg",type:"number",name:"age",placeholder:"Enter Age",component:H.a}),o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"address",placeholder:"Enter Address",component:H.a}),o.a.createElement(G.b,{bsSize:"lg",type:"text",name:"phone",placeholder:"Enter Phone Number",component:H.a}),o.a.createElement(G.b,{bsSize:"lg",type:"number",name:"citizenId",placeholder:"Enter CitizenID",component:H.a})))),o.a.createElement(E.a,null,o.a.createElement(x.a,{type:"submit",color:"primary",disabled:t},"Save")," ",o.a.createElement(x.a,{color:"primary",onClick:function(){j(null),C(!1)}},"Close")))}))))}))}}]);
//# sourceMappingURL=7.aa771371.chunk.js.map