(this["webpackJsonpappstack-react"]=this["webpackJsonpappstack-react"]||[]).push([[6],{1055:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a.n(n),c=a(40),o=a(18),l=a(73),i=a(1),s=a.n(i),u=a(876),d=a(888),m=a(898),p=a(877),f=a(887),b=a(941),h=a(900),g=a(901),E=a(902),x=a(371),y=a(14),w=a(953),v=a.n(w),k=a(955),S=a.n(k),O=a(956),j=a.n(O),L=(a(957),a(1060)),z=a(897),R=function(e){return e.location},C=Object(z.a)(R,(function(e){return e.locations})),F=Object(z.a)(R,(function(e){return e.page})),N=Object(z.a)(R,(function(e){return e.size})),A=Object(z.a)(R,(function(e){return e.totalElement})),D=Object(z.a)(R,(function(e){return e.search})),P=(Object(z.a)(R,(function(e){return e.isLoading})),Object(z.a)(R,(function(e){return e.selectedRows}))),T=Object(z.a)(R,(function(e){return e.sortField})),B=Object(z.a)(R,(function(e){return e.sortType})),I=function(e){return C(e)},M=function(e){return F(e)},U=function(e){return N(e)},q=function(e){return A(e)},J=function(e){return D(e)},V=function(e){return P(e)},X=function(e){return T(e)},Y=function(e){return B(e)},G=a(22),H=a(42),K=Object(y.connect)((function(e){return{search:J(e)}}))((function(e){return s.a.createElement(G.d,{key:Date.parse(new Date),enableReinitialize:!0,initialValues:{search:e.search?e.search:""},onSubmit:function(t){e.onSearch(t.search)}},s.a.createElement(G.c,null,s.a.createElement(p.a,{style:{alignItems:"center"}},s.a.createElement(f.a,{xs:"auto"},s.a.createElement(G.b,{bsSize:"lg",type:"text",name:"search",placeholder:"Search Location Info",component:H.a})),s.a.createElement(f.a,{xs:"auto"},s.a.createElement(L.a,{addonType:"append",color:"primary"},s.a.createElement(x.a,{type:"submit"},"Search!"))),s.a.createElement(f.a,{xs:"auto"},s.a.createElement(L.a,{addonType:"append",color:"primary"},s.a.createElement(x.a,{type:"submit",color:"danger",onClick:function(){e.onSearch("")}},"Reset Search!"))))))})),Q=a(1051),W=a(1052),Z=a(1053),$=a(1054),_=a(10),ee=a(47),te="/locations",ae={getAll:function(e,t,a,n,r){null!==a&&void 0!==a&&null!==n&&void 0!==n||(a="id",n="asc");var c={page:e,size:t,sort:"".concat(a,",").concat(n),search:r};return ee.a.get("".concat(te),{params:c})},create:function(e){var t={locationName:e};return ee.a.post(te,t)},getById:function(e){return ee.a.get("".concat(te,"/").concat(e))},deleteById:function(e){return ee.a.delete("".concat(te,"/").concat(e))},update:function(e,t){var a={locationName:t};return ee.a.put("".concat(te,"/").concat(e),a)}},ne=function(e,t,a,n,r,c){return{type:_.c,payload:{locations:e,page:t,totalElement:a,sortField:n,sortType:r,search:c}}},re=a(927),ce=a(60),oe=a(28);t.default=Object(y.connect)((function(e){return{locations:I(e),page:M(e),size:U(e),sortField:X(e),sortType:Y(e),totalElement:q(e),selectedRows:V(e)}}),{getListLocationAction:function(e,t,a,n,o){return function(){var l=Object(c.a)(r.a.mark((function c(l){var i,s,u;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ae.getAll(e,t,a,n,o);case 3:i=r.sent,s=i.details.locations,u=i.details.totalElements,l(ne(s,e,u)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),c,null,[[0,9]])})));return function(e){return l.apply(this,arguments)}}()},updateSelectedRowsAction:function(e){return{type:_.d,payload:e}}})((function(e){var t=function(e,t){ce.toastr.success(e,t,{timeOut:2500,showCloseButton:!1,progressBar:!1,position:"top-right"})},a=function(e,t){ce.toastr.error(e,t,{timeOut:2500,showCloseButton:!1,progressBar:!1,position:"top-right"})},n=e.getListLocationAction,y=e.size;Object(i.useEffect)((function(){n(1,y)}),[n,y]);var w=function(e,t){var a=t.page,r=t.sizePerPage,c=t.sortField,o=t.sortOrder,l=t.searchText;n(a,r,c,o,l)},k=function(t,a){var n=e.selectedRows;n=a?[].concat(Object(l.a)(n),[t.id]):n.filter((function(e){return e!==t.id})),console.log(n),e.updateSelectedRowsAction(n)},O=function(t,a){var n=a.map((function(e){return e.id})),r=[];t&&(r=n),e.updateSelectedRowsAction(r)},L=function(){w(0,{page:1,sizePerPage:y,sortField:"id",sortOrder:"asc",searchText:""}),e.updateSelectedRowsAction([])},z=Object(i.useState)(!1),R=Object(o.a)(z,2),C=R[0],F=R[1],N=Object(i.useState)(null),A=Object(o.a)(N,2),D=A[0],P=A[1],T=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,ae.getById(t);case 3:a=e.sent,console.log(D),P(a.details.location);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this ?")){e.next=16;break}if(null!==n&&void 0!==n){e.next=6;break}a("Delete Location","Sorry, Cann't Delete"),e.next=16;break;case 6:return e.prev=6,e.next=9,ae.deleteById(n);case 9:t("Delete Location","Delete Location Successfully!"),L(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),a("Delete Location",e.t0.data.message);case 16:L();case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var n=Object(c.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Do you want to delete all selected rows ?")){n.next=10;break}if(null!==e.selectedRows&&void 0!==e.selectedRows&&0!==e.selectedRows.length){n.next=6;break}a("Delete Location","You have not selected the location!"),n.next=10;break;case 6:return n.next=8,e.selectedRows.forEach((function(e){ae.deleteById(e),console.log("X\xf3a ph\u1ea7n t\u1eed th\u1ee9 "+e)}));case 8:t("Delete Location","Delete Location Successfully!"),L();case 10:L();case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),M=[{dataField:"id",text:"Id",sort:!0},{dataField:"name",text:"Name",sort:!0},{dataField:"actions",text:"Actions",align:function(){return"center"},headerStyle:function(){return{textAlign:"center",width:"90px"}},formatter:function(e,t,a){return s.a.createElement(s.a.Fragment,null,s.a.createElement(re.a,{className:"align-middle mr-2",size:18,onClick:function(){return T(t.id)}})," ",s.a.createElement(Q.a,{className:"align-middle mr-2",size:18,onClick:function(){return B(t.id)}}))}}];return s.a.createElement(u.a,{fluid:!0,className:"p-0"},s.a.createElement("h1",{className:"h3 mb-3"},"Location Management"),s.a.createElement(d.a,null,s.a.createElement(m.a,null,s.a.createElement(j.a,{keyField:"id",data:e.locations,columns:M,search:!0},(function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{style:{alignItems:"flex-end"}},s.a.createElement(f.a,{xs:"9"},s.a.createElement(K,t.searchProps)),s.a.createElement(f.a,{xs:"3",style:{paddingBottom:20}},s.a.createElement("div",{className:"float-right pull-right"},s.a.createElement(W.a,{className:"align-middle mr-3",color:"black",size:25,onClick:L}),s.a.createElement(Z.a,{className:"align-middle mr-3",color:"black",size:25,onClick:function(){return F(!0)}}),s.a.createElement($.a,{className:"align-middle mr-3",color:"black",size:25,onClick:I})))),s.a.createElement(v.a,Object.assign({},t.baseProps,{bootstrap4:!0,striped:!0,hover:!0,bordered:!0,remote:!0,sort:{dataField:e.sortField,order:e.sortType},pagination:S()({page:e.page,totalSize:e.totalElement,sizePerPage:e.size,nextPageText:">",prePageText:"<",withFirstAndLast:!0,alwaysShowAllBtns:!0,hideSizePerPage:!0}),selectRow:{mode:"checkbox",clickToSelect:!0,selected:e.selectedRows,onSelect:k,onSelectAll:O},onTableChange:w})))})))),s.a.createElement(b.a,{isOpen:C},s.a.createElement(G.d,{enableReinitialize:!0,initialValues:{name:D?D.name:""},validationSchema:oe.c({name:oe.e().required("Required").max(50,"Must be between 6 to 50 characters").min(6,"Must be between 6 to 50 characters")}),onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),!D){e.next=18;break}return e.prev=2,e.next=5,ae.update(D.id,n.name);case 5:F(!1),t("Update Location","Update Location Successfully!"),L(),P(null),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),a("Update Error",e.t0.data.message),console.log(e.t0),F(!1);case 16:e.next=31;break;case 18:return e.prev=18,e.next=21,ae.create(n.name);case 21:F(!1),t("Create Location","Create Location Successfully!"),L(),P(null),e.next=31;break;case 27:e.prev=27,e.t1=e.catch(18),a("Create Error",e.t1.data.message),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[2,11],[18,27]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.isSubmitting;return s.a.createElement(G.c,null,s.a.createElement(h.a,null,"Create New Location"),s.a.createElement(g.a,null,s.a.createElement(p.a,{style:{alignItems:"center"}},s.a.createElement(f.a,{xs:"auto"},"Location Name:"),s.a.createElement(f.a,null,s.a.createElement(G.b,{bsSize:"lg",type:"text",name:"name",placeholder:"Enter Location Name",component:H.a})))),s.a.createElement(E.a,null,s.a.createElement(x.a,{type:"submit",color:"primary",disabled:t},"Save")," ",s.a.createElement(x.a,{color:"primary",onClick:function(){P(null),F(!1)}},"Close")))}))))}))}}]);
//# sourceMappingURL=6.44524ed4.chunk.js.map